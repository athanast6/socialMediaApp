{% extends 'hooptoday/base.html' %}
{% load static %}
{% block content %}
<div class="bg-black opacity-100">
        
    <br>
    <br>
    <br>
    <br>
    <br>
    <br>
    

    <div class="mt-8 min-w-12 p-2">
        
        
        
        
        <div class = "rounded-2xl p-8 mb-4 bg-gray-50 drop-shadow-md">
            
        <!-- Display content for user -->
            
                <table class = "mx-auto">
                    <tr>
                        <th class="p-6">
                            <h2 class = "text-2xl"> @{{ username }}</h2>
                        </th>
                        <th class="p-6">
                            <!-- Display profile picture -->
                            {% if user_profile.profile_image_url %}
                            <img src="{{ user_profile.profile_image_url }}" width = "200px" alt="Profile Picture">
                            {% else %}
                            <p>No profile picture uploaded yet.</p>
                            {% endif %}
                        </th>
                    </tr>
                    <tr>
                        <td class="p-6">
                            <p class="text-lg font-bold p-2 text-black"> Wins: {{ userwins }}
                                <br>  
                                Losses: {{ userlosses }}
                                <br> 
                                Games Played: {{ usergames }}</p>
                        </td>
                        <td class="p-6">
                            <p class="text-lg font-bold p-2 text-black"> Avg Scored: {{ avg_points }} <br>  Avg Allowed: {{ away_avg_points }}</p>
                        </td>
                    </tr>
                </table>
                <p class="flex items-center justify-center text-lg w-full rounded-full mx-auto">
                            

                    <a href= 
                        "{% url 'changePicture' %}">
                        Change Picture
                        </a>

                    <br>
                
                    {% if user.is_authenticated and user.username == username %}
                        <a href= 
                        "{% url 'logout' %}" class ="p-4">
                                Sign Out 
                        </a>
                    {% endif %}
                </p>
            </div>
        </div>


        {% for post in page.object_list %}

        <div class="border-opacity-75 border-gray-200 rounded-2xl p-8 mb-4 bg-gray-50">
            
            <h2 class="text-lg font-bold font-serif mb-2"> @{{ post.owner }} </h2>
            <p class="text-lg text-black font-serif mt-2"> {{ post.createdDate }} </p>
            
            <br>

            {% if post.result %}
                <strong class="text-xl align-middle my-6">{{ post.result }}</strong>
                <div>
                    <p class="text-3xl align-middle"> {{ post.myTeamName }} {{ post.myScore }} - {{ post.awayTeamName }} {{ post.awayScore }} </p>
                </div>
                <br>
                {% if user.is_authenticated and user == post.owner %}
                    <form action="{% url 'delete-game-post' post.id %}" method="post">
                        {% csrf_token %}
                        <button type="submit">Delete</button>
                    </form>
                {% endif %}
            {% else %}
            
            <p class="text-3xl align-middle">{{ post.text }}</p>

            <div>
                <br>
                {% if user.is_authenticated and user == post.owner %}
                    <form action="{% url 'delete-post' post.id %}" method="post">
                        {% csrf_token %}
                        <button type="submit" 
                            class="hover:text-gray-300 bg-red-600 text-black font-bold rounded focus:outline-none focus:shadow-outline">
                            Delete
                        </button>
                    </form>
                {% endif %}
            </div>
            {% endif %}
            
            <p class ="text-lg"> Likes: {{ post.likes }} <button>+1</button> </p>
            
            
                
        </div>
        {% endfor %}

    
        <br><br>

    <!-- Pagination links -->
        <div class="pagination container min-w-12 p-6 mx-auto">
            <span class="step-links">
                {% if page.has_previous %}
                    <a href="?page=1" class="text-white hover:text-gray-200 text-lg">&laquo; First</a>
                    <a href="?page={{ page.previous_page_number }}" class="text-white hover:text-gray-200">Previous</a>
                {% endif %}

                <span class="current" >
                    <p class="text-white text-lg">Page {{ page.number }} of {{ page.paginator.num_pages }}</p>
                </span>

                {% if page.has_next %}
                    <a href="?page={{ page.next_page_number }}" class="text-white hover:text-gray-200">Next</a>
                    <a href="?page={{ page.paginator.num_pages }}" class="text-white hover:text-gray-200">Last &raquo;</a>
                {% endif %}
            </span>
        </div>
    </div>
</div>  





{% endblock %}